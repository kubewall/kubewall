# TLS Configuration
tls:
  # Name of the Kubernetes secret that contains the TLS certificate and key
  secretName: ""
  # The hostname for TLS (ensure DNS resolution for this hostname)
  host: kubewall.local

# Replica settings for the deployment
replicaCount: 1  # Number of replicas of the application pod

# Kubernetes API client configuration for throttling
k8s_client_burst: ""  # Max burst for throttle of Kubernetes client (e.g., "200")
k8s_client_qps: ""    # Queries per second limit for Kubernetes client (e.g., "100")

# Container image settings
image:
  # Image repository location
  repository: ghcr.io/kubewall/kubewall
  # Pull policy for the image ("Always", "IfNotPresent", "Never")
  pullPolicy: IfNotPresent
  # Image tag to be used (can be set to a specific version or "latest")
  tag: ""

# Service account settings
serviceAccount:
  create: true  # Whether to create a new service account
  annotations: {}  # Annotations for the service account (e.g., IAM roles)
  name: ""  # Name of the service account, leave empty for auto-generation

# Data volume for Kubewall-specific configurations
kubewallData:
  # Path where Kubewall data will be mounted inside the container
  mountPath: "/.kubewall"

# Image pull secrets, required if pulling images from private repositories
imagePullSecrets: []

# Override for Helm chart name
nameOverride: ""  # Set to override the name of the chart
fullnameOverride: ""  # Set to override the full name of the chart

# Annotations for the pod (for integrations or monitoring tools)
podAnnotations: {}

# Pod-level security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534  # nobody user
  runAsGroup: 65534
  fsGroup: 65534
  seccompProfile:
    type: RuntimeDefault

# Container-level security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false  # Kubewall needs to write to /.kubewall
  runAsNonRoot: true
  runAsUser: 65534
  capabilities:
    drop:
      - ALL

# Service exposure settings
service:
  type: ClusterIP  # Type of Kubernetes service (ClusterIP, NodePort, LoadBalancer)
  # Examples:
  #   listen: ":8443"           # listen on all interfaces port 8443
  #   listen: "127.0.0.1:8443"  # listen only localhost inside the pod
  #   listen: "192.168.1.10:8443" # specific pod interface (rare)
  listen: ":8443"  # Listen on all interfaces (IPv6 compatible)

# Ingress configuration for external access
ingress:
  enabled: false  # Set to true to enable ingress
  className: ""  # Ingress class name (e.g., "nginx", "traefik")
  annotations:
    # Backend protocol is HTTPS by default since Kubewall runs with TLS
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    # Common additional annotations for different ingress controllers:
    # For nginx-ingress with cert-manager:
    # cert-manager.io/cluster-issuer: "letsencrypt-prod"
    # nginx.ingress.kubernetes.io/ssl-redirect: "true"
    # For traefik:
    # traefik.ingress.kubernetes.io/router.tls: "true"
    # For AWS ALB:
    # alb.ingress.kubernetes.io/scheme: internet-facing
    # alb.ingress.kubernetes.io/target-type: ip
    # alb.ingress.kubernetes.io/backend-protocol: "HTTPS"
  hosts:
    - host: kubewall.local  # Hostname for accessing Kubewall
      paths:
        - path: /
          pathType: Prefix  # Path type: Prefix, Exact, or ImplementationSpecific
  tls:
    # Auto TLS configuration - automatically creates self-signed certificates
    autoTLS: true  # Set to false to disable automatic TLS certificate generation
    secretName: ""  # Leave empty to auto-generate, or specify your own TLS secret name
    # Manual TLS configuration (used when autoTLS is false)
    # - secretName: kubewall-ingress-tls  # Name of the TLS secret
    #   hosts:
    #     - kubewall.local  # Hostname(s) covered by the certificate

# Resource limits and requests for the container
resources:
  limits:
    cpu: 500m  # Maximum CPU limit (500 milli-CPU)
    memory: 512Mi  # Maximum memory limit (512 MiB)
  requests:
    cpu: 250m  # Minimum CPU request (250 milli-CPU)
    memory: 256Mi  # Minimum memory request (256 MiB)

# Persistent volume claim (PVC) for Kubewall data storage
pvc:
  name: kubewall-data  # Name of the PVC
  storage: 20Mi  # Storage size requested for the PVC
  accessModes: ReadWriteOnce  # Access mode for the PVC
  storageClass: ""  # Storage class for the PVC (leave empty for default)

# Node scheduling preferences
nodeSelector: {}  # Node labels for pod assignment

# Tolerations for node taints
tolerations: []

# Affinity rules for pod scheduling
affinity: {}
